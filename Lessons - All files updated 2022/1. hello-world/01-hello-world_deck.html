<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Module 3: R</title>
    <meta charset="utf-8" />
    <meta name="author" content="Instructor: Anjali Silva, PhD" />
    <meta name="author" content="TA: Tia Harrison, MSc" />
    <meta name="date" content="2022-06-22" />
    <script src="libs/header-attrs-2.14/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Module 3: R
]
.subtitle[
## Hello, World
]
.author[
### Instructor: Anjali Silva, PhD
]
.author[
### TA: Tia Harrison, MSc
]
.institute[
### Data Sciences Institute, University of Toronto
]
.date[
### 2022-06-22
]

---






# Course Documents
* Visit: https://github.com/anjalisilva/IntroductionToR 

* All course material will be available via IntroductionToR GitHub repository (https://github.com/anjalisilva/IntroductionToR). Folder structure is as follows:
   * Lessons - All files: This folder contains all files.
   * **Lessons - Data only**: This folder contains data only.
   * **Lessons - Lesson Plans only**: This folder contains lesson plans only.
   * **Lessons - PDF only**: This folder contains slide PDFs only.
   * README - README file
   * .gitignore - Files to ignore specified by instructor

## Course Contacts
* Instructor: Anjali Silva
  Email: a.silva@utoronto.ca (Must use the subject line DSI-IntroR.   E.g., DSI-IntroR: Inquiry about Lecture I.)

* TA: Tia Harrison
Email: tia.harrison@mail.utoronto.ca

---

# Overview

Getting set-up (Alexander (eds), 2021, Chapters 2-4)

- R
- RStudio

R basics (Wickham and Grolemund, 2017, Chapter 4)

File types

- scripts (Wickham and Grolemund, 2017 Chapter 6)
- RMarkdown (Wickham and Grolemund, 2017 Chapter 27)

Hello, World!

---

class: inverse, center, middle

# Getting set-up

---

## R

What is R?

- A programming language focused on statistics
- Open source and free

---

## Getting R

1. Go to https://utstat.toronto.edu/cran
2. Click *Download R for (your operating system)*.
3. For Windows, select *install R for the first time*. For Mac and Linux, select the download that is appropriate for your OS.
4. Download and install.

---

## RStudio

What is RStudio?

- The integrated development environment (IDE) that lets us run R code
- Desktop and cloud versions available

---

## Getting RStudio

1. Go to rstudio.com
2. Under *Products*, look under *Open Source* and select *RStudio.
3. Scroll down and select *RStudio Desktop* and *DOWNLOAD RSTUDIO DESKTOP*.
4. Select the *DOWNLOAD* button under the *Free* version of RStudio Desktop.
5. If the download that is "Recommended for your system" is correct, click the download button. If not, scroll down and find the version that is correct for your OS.
6. Download and install.

---

## Welcome to RStudio

&lt;img src="RStudio.png" width="2000" height="450" /&gt;

---

Your saved R files, where you can write and edit code, are in the upper left. If you do not have a file open, this section will be collapsed.

&lt;img src="RStudio - Scripts.png" width="2000" height="450" /&gt;

---

The console, where you run code and view output, is on the lower left.

&lt;img src="RStudio - Console.png" width="2000" height="450" /&gt;

---

The environment, where you can see variables that you have saved, is on the upper right.

&lt;img src="RStudio - Environment.png" width="2000" height="450" /&gt;

---

The lower right section contains:

- *Files*, where you see the folder structure of your working directory
- *Plots*, where plots you create are displayed
- *Packages*, an inventory of all R packages that are installed
- *Help*, where you can search information about R functions and packages

&lt;img src="RStudio - Files, Plots, Packages, Help, Viewer.png" width="2000" height="450" /&gt;

---
# Interacting with R

* Console:
    * Type commands directly into the console and press ‘Enter’ to execute.
    
* Script:
    * Put cursor at the end of the line to execute OR highlight the section.
    * Press ‘Ctrl’ + ‘Enter’ on Windows, Mac OR ‘Cmd’ + ‘Return’ on Mac.
    
* Clear console with ‘Ctrl’ + ‘L’.

* If R is still waiting for you to enter more text, the console will show a + prompt.

---

# R Project

* Good to keep data, analyses, and text in a single folder. 

* RStudio interface for this is Projects.
    * File → New project; choose New directory → New project

* Enter a name for this new folder (“directory”) and choose a convenient location for it. This will be your working directory.
    * On Desktop, save as ‘DSI IntroR’

* Click on ‘Create’ project.

* Create a new file where we will type our scripts.
    * Go to File → New File → R script. Click the save icon on your toolbar and save your script as “script.R”.

---

class: inverse, center, middle

# R basics

---

## Location

* Current location:

```r
getwd() # current location of the file, if saved
```

* Set working directory: By typing the path

```r
setwd("/Users/&lt;Name&gt;/Desktop")
```

* Or (recommended method):
    * Session → Set Working Directory → Choose Directory...

---
## R Coding Style

* Limit yourself to 80 characters per line.

* Use comments. Don’t describe what the code does, but explain why you wrote it that way.

* Use only ← for assignment, not =.

* Never reassign reserved words.

* You may read more:
    * https://google.github.io/styleguide/Rguide.html
    * http://steipe.biochemistry.utoronto.ca/abc/index.php/ RPR-Coding_style

---
## R Features
* In R, the indexing begins from 1.

* R is case sensitive (“X” is not the same as “x”).

* R uses dynamic variable typing, so variables can be used over and over again.


## Mathematical operators

For now we will work in the console.

To run code, hit enter.

If it runs successfully, you will see a `&gt;` on the line with the cursor.

If it instead shows a `+`, the command was incomplete. You can finish the command and hit enter, or hit ESCAPE to start again.


```r
(27 + 0.4 - 2 * 7 / 11) ^ 3
```

```
## [1] 17835.37
```

---

## Creating objects

`&lt;-` is the assignment operator.

To assign the value 27 to the object named `num_participants`, you type:


```r
num_participants &lt;- 27
```

Remember that names:

- must start with a letter
- can only contain letters, numbers, underscores, and periods

Running the name of the object will display the object.


```r
num_participants
```

```
## [1] 27
```

---

## Functions

Built-in functions perform many operations. They take the form:
`function_name(argument1 = value1, argument2 = value2, ...)`


```r
sqrt(16)
```

```
## [1] 4
```

```r
seq(1, 14)
```

```
##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14
```

---
## R Help

* Online documentation for functions and variables in R exists.

* Obtained by typing help(FunctionName) or ?FunctionName at the R prompt, where FunctionName is name of function.


```r
help(sqrt)

?sqrt
```

---

## R Packages

* Packages are collections of R functions, data, and compiled code.

* Libraries are directories in R where the packages are stored.

* Built-in functions are part of R standard or base packages and do not need to be downloaded.

```r
library(help = "base")
library(help = "stats")
```

* Some functions are not built-in. To get these, need to download packages

* R packages extend R's functionality.


```r
install.packages("tidyverse")
```

Every time you start a new RStudio session you will need to load the packages you want to use.


```r
library(tidyverse)
```


---

class: inverse, center, middle

# Exercises

---

## Basic Operations

1. Install and load the `faraway` library.
2. Create an object named `my_sequence` that is a sequence from 1 to 7.
3. Use an R function to take the square roots of all the numbers in the sequence. Save this new sequence as an object named `sqrt_sequence`.
4. Multiply `sqrt_sequence` by 3.

---

class: inverse, center, middle

# File types

---

## R Scripts

&lt;img src="script.png" width="2000" /&gt;

---

## R Scripts

R Scripts are files where you can save and edit your code. 

### Running code

Run the entire script by pressing Run

&lt;img src="Run.png" width="2000" /&gt;

Run the command where your cursor is located by pressing Cmd/Ctrl + Enter

Run a section of commands by highlighting them and pressing Cmd/Ctrl + Enter

---

### Diagnostics

When working in a script, RStudio will mark syntax errors. If you hover over the red x, you can see what the problem is.

&lt;img src="syntax_error.png" width="1000" /&gt;

---

## R Markdown

&lt;img src="markdown.png" width="2000" /&gt;

---

## R Markdown

R Markdown files combine code chunks with the results of those chunks and text.
They support output formats like PDFs, html, Word files, and slideshows.

---

### Components

In the YAML header, the document information and settings are specified.

&lt;img src="markdown_YAML.png" width="2000" /&gt;

---

### Components

Text goes in between the code chunks. This text can be formatted with basic markdown syntax.

&lt;img src="markdown_text.png" width="2000" /&gt;

---

### Components

You can write in code chunks the same way you would write in a script.

&lt;img src="markdown_code_chunks.png" width="2000" /&gt;

---

### Running code

Like with a script, you can use the Run button Cmd/Ctrl + Enter.

Each chunk also has an arrow you can press to run the code in that chunk.

The output will display below the code chunk rather than in the console or the Plots section.

---

### Knitting .Rmd files

To present your work, you can knit your R Markdown file to a more common file type, including PDFs, Word documents, and html files.

&lt;img src="knit.png" width="2000" /&gt;

---

class: inverse, center, middle

# Exercises

---

## R script

1. Create a new R script.
2. Save the script.
3. Write code to calculate the average of ten numbers.
4. Run the script.

---

## R Markdown

1. Create a new R Markdown file.
2. Save the file.
3. Load the `tidyverse` and `faraway` libraries.
4. Load the dataset "broccoli" by calling the function `data()`
5. Print out the `broccoli` dataset in the R Markdown file.
6. Knit the R Markdown file to PDF.

---

class: inverse, center, middle

# Any questions?

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
